syntax = "proto3";

package chat;

// Interface exported by the server.
service Chat {
    // A simple RPC.
    //
    // Signs in and gets unread messages.
    rpc SignInExisting(Username) returns (UnreadsOrError) {}
    rpc SignInError() returns (Error) {}
    rpc SignInNew(Username) returns (UnreadsOrError) {}
    // Sends message to recipient with Username
    rpc Send(Username, SendMessage) returns (SenderNote) {}
    rpc List(Wildcard) returns ()
}

message Username {
    required string name = 1;
}

message UnreadsOrError {
    int32 unreadsNum = 1;
    repeated string message = 2; 
    string error = 3;
}

// The response message
message SenderNote {
    string message = 1;
}

